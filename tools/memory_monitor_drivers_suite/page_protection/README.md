# é¡µé¢ä¿æŠ¤å†…å­˜ç›‘æ§é©±åŠ¨

## æ¦‚è¿°

é¡µé¢ä¿æŠ¤å†…å­˜ç›‘æ§é©±åŠ¨ä½¿ç”¨ Linux é¡µé¢ä¿æŠ¤æœºåˆ¶æ¥ç›‘æ§å¤§å—å†…å­˜åŒºåŸŸçš„è®¿é—®ã€‚å½“è¢«ç›‘æ§çš„å†…å­˜é¡µé¢è¢«è®¿é—®æ—¶ï¼Œä¼šè§¦å‘é¡µé¢é”™è¯¯ï¼Œä»è€Œæ•è·åˆ°å†…å­˜è®¿é—®è¡Œä¸ºã€‚

## ç‰¹æ€§

- âœ… **å¤šæ¶æ„æ”¯æŒ**: ARM32, ARM64, x86, x86_64
- âœ… **é¡µé¢çº§ç›‘æ§**: ä»¥é¡µé¢ä¸ºå•ä½ç›‘æ§å†…å­˜è®¿é—®
- âœ… **è¯»å†™æ£€æµ‹**: æ”¯æŒè¯»å–ã€å†™å…¥ã€è¯»å†™ç›‘æ§
- âœ… **å¤§å—å†…å­˜**: é€‚åˆç›‘æ§ç¼“å†²åŒºã€æ•°ç»„ç­‰å¤§å—å†…å­˜
- âœ… **ä½å¼€é”€**: åˆ©ç”¨ç¡¬ä»¶é¡µé¢ä¿æŠ¤æœºåˆ¶ï¼Œå¼€é”€ç›¸å¯¹è¾ƒå°
- âœ… **ä¸Šä¸‹æ–‡ä¿¡æ¯**: æä¾›è¯¦ç»†çš„è®¿é—®ä¸Šä¸‹æ–‡å’Œè°ƒç”¨æ ˆ

## å·¥ä½œåŸç†

1. **é¡µé¢ä¿æŠ¤è®¾ç½®**: ä¿®æ”¹ç›®æ ‡é¡µé¢çš„ä¿æŠ¤å±æ€§ï¼ˆåªè¯»/ä¸å¯è®¿é—®ï¼‰
2. **è®¿é—®è§¦å‘**: å½“ç¨‹åºè®¿é—®è¢«ä¿æŠ¤çš„é¡µé¢æ—¶è§¦å‘é¡µé¢é”™è¯¯
3. **å¼‚å¸¸å¤„ç†**: åœ¨é¡µé¢é”™è¯¯å¤„ç†å‡½æ•°ä¸­è®°å½•è®¿é—®ä¿¡æ¯
4. **æƒé™æ¢å¤**: ä¸´æ—¶æ¢å¤é¡µé¢æƒé™å…è®¸æ­£å¸¸è®¿é—®
5. **é‡æ–°ä¿æŠ¤**: é‡æ–°è®¾ç½®é¡µé¢ä¿æŠ¤ä»¥ç»§ç»­ç›‘æ§

## ğŸ—ï¸ æ¶æ„è®¾è®¡å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·ç©ºé—´åº”ç”¨                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  /proc/page_monitor                         â”‚
â”‚             (é…ç½®æ¥å£ + çŠ¶æ€æŸ¥çœ‹æ¥å£)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 page_monitor.ko é©±åŠ¨æ¨¡å—                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   é¡µé¢ç®¡ç†       â”‚   å¼‚å¸¸å¤„ç†      â”‚    æ¶æ„é€‚é…å±‚        â”‚  â”‚
â”‚  â”‚ - ç›‘æ§ç‚¹ç®¡ç†     â”‚ - é¡µé¢é”™è¯¯å¤„ç†  â”‚ - ARM32/ARM64      â”‚  â”‚
â”‚  â”‚ - proc æ¥å£     â”‚ - æƒé™ç®¡ç†      â”‚ - x86/x86_64       â”‚  â”‚
â”‚  â”‚ - é¡µé¢å¯¹é½      â”‚ - ä¸Šä¸‹æ–‡æ”¶é›†    â”‚ - MMU æŠ½è±¡         â”‚  â”‚
â”‚  â”‚ - å¤§å°æ£€æŸ¥      â”‚ - è°ƒç”¨æ ˆè§£æ    â”‚ - é¡µè¡¨æ“ä½œ          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Linux å†…æ ¸å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   å†…å­˜ç®¡ç†       â”‚   å¼‚å¸¸å¤„ç†      â”‚    ç¬¦å·è§£æ          â”‚  â”‚
â”‚  â”‚ - é¡µé¢åˆ†é…å™¨     â”‚ - é¡µé¢é”™è¯¯      â”‚ - kallsyms         â”‚  â”‚
â”‚  â”‚ - VMA ç®¡ç†      â”‚ - å¼‚å¸¸å‘é‡      â”‚ - stack_trace      â”‚  â”‚
â”‚  â”‚ - é¡µè¡¨æ“ä½œ      â”‚ - ä¿¡å·å¤„ç†      â”‚ - ç¬¦å·æŸ¥æ‰¾          â”‚  â”‚
â”‚  â”‚ - æƒé™æ§åˆ¶      â”‚ - ä¸Šä¸‹æ–‡åˆ‡æ¢    â”‚ - åœ°å€è§£æ          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       ç¡¬ä»¶å±‚                                â”‚
â”‚             MMU (å†…å­˜ç®¡ç†å•å…ƒ) / é¡µè¡¨ç¡¬ä»¶                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      ARM        â”‚      x86       â”‚      å…±åŒç‰¹æ€§        â”‚  â”‚
â”‚  â”‚ - TTBR å¯„å­˜å™¨    â”‚ - CR3 å¯„å­˜å™¨    â”‚ - é¡µè¡¨éå†          â”‚  â”‚
â”‚  â”‚ - TCR é…ç½®      â”‚ - PDE/PTE      â”‚ - æƒé™æ£€æŸ¥          â”‚  â”‚
â”‚  â”‚ - é¡µè¡¨æ ¼å¼      â”‚ - é¡µç›®å½•ç»“æ„    â”‚ - åœ°å€è½¬æ¢          â”‚  â”‚
â”‚  â”‚ - åŸŸæƒé™       â”‚ - æ®µé¡µé¢æ¨¡å¼    â”‚ - å¼‚å¸¸ç”Ÿæˆ          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š å·¥ä½œæµç¨‹å›¾

```
[ç”¨æˆ·é…ç½®ç›‘æ§åŒºåŸŸ]
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‚æ•°éªŒè¯       â”‚â”€â”€â”€â–¶â”‚   é¡µé¢å¯¹é½æ£€æŸ¥   â”‚â”€â”€â”€â–¶â”‚   è™šæ‹Ÿå†…å­˜æ£€æŸ¥   â”‚
â”‚ - åœ°å€æœ‰æ•ˆæ€§     â”‚    â”‚ - 4KB å¯¹é½      â”‚    â”‚ - VMA å­˜åœ¨      â”‚
â”‚ - å¤§å°èŒƒå›´      â”‚    â”‚ - è¾¹ç•Œè®¡ç®—      â”‚    â”‚ - æƒé™éªŒè¯      â”‚
â”‚ - ç±»å‹æœ‰æ•ˆæ€§     â”‚    â”‚ - é¡µé¢æ•°é‡      â”‚    â”‚ - åœ°å€ç©ºé—´      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¿å­˜åŸå§‹æƒé™   â”‚    â”‚   ä¿®æ”¹é¡µé¢æƒé™   â”‚    â”‚   æ¿€æ´»ç›‘æ§      â”‚
â”‚ - è®°å½• PTE çŠ¶æ€  â”‚    â”‚ - æ¸…é™¤å¯å†™ä½     â”‚    â”‚ - ç›‘æ§ç‚¹æ³¨å†Œ    â”‚
â”‚ - å¤‡ä»½é¡µè¡¨é¡¹     â”‚    â”‚ - æ¸…é™¤å¯è¯»ä½     â”‚    â”‚ - çŠ¶æ€è®°å½•      â”‚
â”‚ - æƒé™å¤‡ä»½      â”‚    â”‚ - åˆ·æ–° TLB      â”‚    â”‚ - è®¡æ•°åˆå§‹åŒ–     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¡µé¢è®¿é—®ç›‘æ§å¾ªç¯                          â”‚
â”‚                                                             â”‚
â”‚  [ç¨‹åºæ‰§è¡Œ] â”€â”€â”¬â”€â†’ [è®¿é—®è¢«ç›‘æ§é¡µé¢] â”€â”€â”¬â”€â†’ [é¡µé¢é”™è¯¯è§¦å‘]      â”‚
â”‚              â”‚                      â”‚                      â”‚
â”‚              â”‚                      â–¼                      â”‚
â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚            â”‚   é¡µé¢é”™è¯¯å¼‚å¸¸   â”‚              â”‚
â”‚              â”‚            â”‚ - ARM: æ•°æ®å¼‚å¸¸ â”‚              â”‚
â”‚              â”‚            â”‚ - x86: #PFå¼‚å¸¸  â”‚              â”‚
â”‚              â”‚            â”‚ - é”™è¯¯ä»£ç åˆ†æ   â”‚              â”‚
â”‚              â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              â”‚                      â”‚                      â”‚
â”‚              â”‚                      â–¼                      â”‚
â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚            â”‚   å¼‚å¸¸å¤„ç†å‡½æ•°   â”‚              â”‚
â”‚              â”‚            â”‚ - è·å–é”™è¯¯åœ°å€   â”‚              â”‚
â”‚              â”‚            â”‚ - åˆ†æè®¿é—®ç±»å‹   â”‚              â”‚
â”‚              â”‚            â”‚ - æŸ¥æ‰¾ç›‘æ§ç‚¹     â”‚              â”‚
â”‚              â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              â”‚                      â”‚                      â”‚
â”‚              â”‚                      â–¼                      â”‚
â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚            â”‚   æƒé™ä¸´æ—¶æ¢å¤   â”‚              â”‚
â”‚              â”‚            â”‚ - æ¢å¤é¡µé¢æƒé™   â”‚              â”‚
â”‚              â”‚            â”‚ - åˆ·æ–° TLB      â”‚              â”‚
â”‚              â”‚            â”‚ - å…è®¸è®¿é—®      â”‚              â”‚
â”‚              â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              â”‚                      â”‚                      â”‚
â”‚              â”‚                      â–¼                      â”‚
â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚            â”‚   ä¸Šä¸‹æ–‡æ”¶é›†     â”‚              â”‚
â”‚              â”‚            â”‚ - è¿›ç¨‹ä¿¡æ¯      â”‚              â”‚
â”‚              â”‚            â”‚ - æ•…éšœåœ°å€      â”‚              â”‚
â”‚              â”‚            â”‚ - è®¿é—®ç±»å‹      â”‚              â”‚
â”‚              â”‚            â”‚ - è°ƒç”¨æ ˆè¿½è¸ª     â”‚              â”‚
â”‚              â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              â”‚                      â”‚                      â”‚
â”‚              â”‚                      â–¼                      â”‚
â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚            â”‚   ä¿¡æ¯è¾“å‡º       â”‚              â”‚
â”‚              â”‚            â”‚ - å†…æ ¸æ—¥å¿—      â”‚              â”‚
â”‚              â”‚            â”‚ - ç»Ÿè®¡æ›´æ–°      â”‚              â”‚
â”‚              â”‚            â”‚ - æ ¼å¼åŒ–è¾“å‡º     â”‚              â”‚
â”‚              â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              â”‚                      â”‚                      â”‚
â”‚              â”‚                      â–¼                      â”‚
â”‚              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚              â”‚            â”‚   é‡æ–°ä¿æŠ¤é¡µé¢   â”‚              â”‚
â”‚              â”‚            â”‚ - æ¢å¤ä¿æŠ¤æƒé™   â”‚              â”‚
â”‚              â”‚            â”‚ - åˆ·æ–° TLB      â”‚              â”‚
â”‚              â”‚            â”‚ - ç»§ç»­ç›‘æ§      â”‚              â”‚
â”‚              â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚              â”‚                      â”‚                      â”‚
â”‚              â”‚                      â–¼                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [æ¢å¤æ‰§è¡Œ] â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ é¡µé¢ä¿æŠ¤æœºåˆ¶è¯¦è§£

### é¡µé¢æƒé™æ§åˆ¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¡µé¢æƒé™ä½å›¾                          â”‚
â”‚                                                         â”‚
â”‚  åŸå§‹é¡µé¢æƒé™:     â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”‚
â”‚  (ç›‘æ§å‰)         â”‚  P  â”‚  R  â”‚  W  â”‚  X  â”‚  U  â”‚  G  â”‚  â”‚
â”‚                   â”‚  1  â”‚  1  â”‚  1  â”‚  1  â”‚  1  â”‚  0  â”‚  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  ç›‘æ§é…ç½®:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  åªè¯»ç›‘æ§        â”‚  â”‚  å†™å…¥ç›‘æ§        â”‚              â”‚
â”‚  â”‚  (æ¸…é™¤å†™ä½)      â”‚  â”‚  (æ¸…é™¤è¯»å†™ä½)    â”‚              â”‚
â”‚  â”‚                â”‚  â”‚                â”‚              â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
â”‚  â”‚ â”‚  W  â”‚    0    â”‚ â”‚  â”‚ â”‚ R/W â”‚   00    â”‚ â”‚              â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                         â”‚
â”‚  ç›‘æ§åé¡µé¢æƒé™:   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”‚
â”‚  (è¯»ç›‘æ§)         â”‚  P  â”‚  R  â”‚  W  â”‚  X  â”‚  U  â”‚  G  â”‚  â”‚
â”‚                   â”‚  1  â”‚  1  â”‚  0  â”‚  1  â”‚  1  â”‚  0  â”‚  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  ç›‘æ§åé¡µé¢æƒé™:   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”  â”‚
â”‚  (å†™ç›‘æ§)         â”‚  P  â”‚  R  â”‚  W  â”‚  X  â”‚  U  â”‚  G  â”‚  â”‚
â”‚                   â”‚  1  â”‚  0  â”‚  0  â”‚  1  â”‚  1  â”‚  0  â”‚  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  P=Present, R=Read, W=Write, X=Execute, U=User, G=Globalâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¶æ„ç‰¹å®šé¡µè¡¨ç»“æ„

#### ARM64 é¡µè¡¨ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ARM64 é¡µè¡¨å±‚æ¬¡                         â”‚
â”‚                                                         â”‚
â”‚  è™šæ‹Ÿåœ°å€ [47:0]                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [47:39] â”‚ [38:30] â”‚ [29:21] â”‚ [20:12] â”‚   [11:0]   â”‚ â”‚
â”‚  â”‚  PGD    â”‚  PUD    â”‚  PMD    â”‚  PTE    â”‚   OFFSET   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚         â”‚         â”‚         â”‚                  â”‚
â”‚       â–¼         â–¼         â–¼         â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   PGD   â”‚ â”‚   PUD   â”‚ â”‚   PMD   â”‚ â”‚   PTE   â”‚        â”‚
â”‚  â”‚  Table  â”‚ â”‚  Table  â”‚ â”‚  Table  â”‚ â”‚  Entry  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                            â”‚            â”‚
â”‚                                            â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 é¡µè¡¨é¡¹ (PTE)                         â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ [63:59] [58:55] [54:47] [46:12] [11:10] [9:8] [7:0] â”‚ â”‚
â”‚  â”‚ ignore  sw-use  ignore  PFN     access  ap   attr  â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ å…³é”®ä½:                                             â”‚ â”‚
â”‚  â”‚ bit 0  : Valid (é¡µé¢æœ‰æ•ˆ)                           â”‚ â”‚
â”‚  â”‚ bit 6  : AP[0] (è®¿é—®æƒé™)                          â”‚ â”‚
â”‚  â”‚ bit 7  : AP[1] (è®¿é—®æƒé™)                          â”‚ â”‚
â”‚  â”‚ bit 10 : AF (è®¿é—®æ ‡å¿—)                             â”‚ â”‚
â”‚  â”‚ bit 51 : DBM (è„ä½ç®¡ç†)                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### x86_64 é¡µè¡¨ç»“æ„  
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   x86_64 é¡µè¡¨å±‚æ¬¡                        â”‚
â”‚                                                         â”‚
â”‚  è™šæ‹Ÿåœ°å€ [47:0]                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [47:39] â”‚ [38:30] â”‚ [29:21] â”‚ [20:12] â”‚   [11:0]   â”‚ â”‚
â”‚  â”‚  PML4   â”‚  PDPT   â”‚   PD    â”‚   PT    â”‚   OFFSET   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚         â”‚         â”‚         â”‚                  â”‚
â”‚       â–¼         â–¼         â–¼         â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  PML4   â”‚ â”‚  PDPT   â”‚ â”‚   PD    â”‚ â”‚   PT    â”‚        â”‚
â”‚  â”‚  Table  â”‚ â”‚  Table  â”‚ â”‚  Table  â”‚ â”‚  Entry  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                            â”‚            â”‚
â”‚                                            â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 é¡µè¡¨é¡¹ (PTE)                         â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ [63] [62:52] [51:12] [11:9] [8] [7] [6] [5] [4:0]   â”‚ â”‚
â”‚  â”‚ XD   avail   PFN     avail  G   PAT PS  A   flags  â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚ å…³é”®ä½:                                             â”‚ â”‚
â”‚  â”‚ bit 0  : P (Present - é¡µé¢å­˜åœ¨)                     â”‚ â”‚
â”‚  â”‚ bit 1  : R/W (è¯»/å†™æƒé™)                           â”‚ â”‚
â”‚  â”‚ bit 2  : U/S (ç”¨æˆ·/ç³»ç»Ÿæƒé™)                       â”‚ â”‚
â”‚  â”‚ bit 5  : A (Accessed - è®¿é—®ä½)                     â”‚ â”‚
â”‚  â”‚ bit 6  : D (Dirty - è„ä½)                          â”‚ â”‚
â”‚  â”‚ bit 63 : XD (Execute Disable)                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ å†…æ ¸é…ç½®è¦æ±‚

### å¿…éœ€çš„å†…æ ¸é…ç½®é€‰é¡¹

ä½¿ç”¨é¡µé¢ä¿æŠ¤å†…å­˜ç›‘æ§é©±åŠ¨**å¿…é¡»**å¯ç”¨ä»¥ä¸‹å†…æ ¸é…ç½®é€‰é¡¹ï¼š

```bash
# å†…å­˜ç®¡ç†åŸºç¡€æ”¯æŒ
CONFIG_MMU=y                         # å†…å­˜ç®¡ç†å•å…ƒ (å¿…éœ€)
CONFIG_HIGHMEM=y                     # é«˜ç«¯å†…å­˜æ”¯æŒ (32ä½ç³»ç»Ÿ)
CONFIG_PAGE_TABLE_ISOLATION=y       # é¡µè¡¨éš”ç¦» (x86, å¯é€‰)

# è™šæ‹Ÿå†…å­˜æ”¯æŒ
CONFIG_VIRTUAL_MEM=y                 # è™šæ‹Ÿå†…å­˜æ”¯æŒ
CONFIG_VMALLOC=y                     # vmalloc æ”¯æŒ
CONFIG_PROC_VMCORE=y                 # /proc/vmcore æ”¯æŒ (å¯é€‰)

# é¡µé¢é”™è¯¯å¤„ç†
CONFIG_FAULT_INJECTION=y             # é”™è¯¯æ³¨å…¥æ¡†æ¶ (å¯é€‰)
CONFIG_FAULT_INJECTION_DEBUG_FS=y    # é”™è¯¯æ³¨å…¥ debugfs (å¯é€‰)
CONFIG_PAGE_POISONING=y              # é¡µé¢ä¸­æ¯’ (è°ƒè¯•ç”¨, å¯é€‰)
CONFIG_PAGE_GUARD=y                  # é¡µé¢ä¿æŠ¤ (è°ƒè¯•ç”¨, å¯é€‰)

# è°ƒè¯•æ”¯æŒ
CONFIG_DEBUG_KERNEL=y                # å†…æ ¸è°ƒè¯•æ”¯æŒ
CONFIG_DEBUG_INFO=y                  # è°ƒè¯•ä¿¡æ¯
CONFIG_DEBUG_VM=y                    # è™šæ‹Ÿå†…å­˜è°ƒè¯• (æ¨è)
CONFIG_DEBUG_PAGEALLOC=y             # é¡µé¢åˆ†é…è°ƒè¯• (å¯é€‰)
CONFIG_DEBUG_PAGEALLOC_ENABLE_DEFAULT=y  # é»˜è®¤å¯ç”¨é¡µé¢åˆ†é…è°ƒè¯• (å¯é€‰)

# é¡µé¢ç®¡ç†
CONFIG_COMPACTION=y                  # å†…å­˜å‹ç¼©
CONFIG_MIGRATION=y                   # é¡µé¢è¿ç§»
CONFIG_PAGE_OWNER=y                  # é¡µé¢æ‰€æœ‰è€…è·Ÿè¸ª (è°ƒè¯•ç”¨, å¯é€‰)
CONFIG_PAGE_EXTENSION=y              # é¡µé¢æ‰©å±• (å¯é€‰)

# proc æ–‡ä»¶ç³»ç»Ÿ
CONFIG_PROC_FS=y                     # /proc æ–‡ä»¶ç³»ç»Ÿ
CONFIG_PROC_SYSCTL=y                 # /proc/sys æ”¯æŒ
CONFIG_PROC_PAGE_MONITOR=y           # é¡µé¢ç›‘æ§ proc æ¥å£ (å¯é€‰)

# ç¬¦å·è¡¨æ”¯æŒ (ç”¨äºè°ƒç”¨æ ˆè§£æ)
CONFIG_KALLSYMS=y                    # å†…æ ¸ç¬¦å·è¡¨
CONFIG_KALLSYMS_ALL=y                # æ‰€æœ‰ç¬¦å· (æ¨è)
CONFIG_KALLSYMS_EXTRA_PASS=y         # é¢å¤–ç¬¦å·å¤„ç†

# è°ƒç”¨æ ˆè¿½è¸ª
CONFIG_STACKTRACE=y                  # è°ƒç”¨æ ˆè¿½è¸ªæ”¯æŒ
CONFIG_STACKTRACE_SUPPORT=y          # æ¶æ„æ”¯æŒè°ƒç”¨æ ˆè¿½è¸ª
CONFIG_FRAME_POINTER=y               # å¸§æŒ‡é’ˆ (æ¨è)
```

### æ¶æ„ç‰¹å®šé…ç½®

#### ARM32 (Cortex-A5/A7/A8/A9/A15)
```bash
CONFIG_ARM=y
CONFIG_MMU=y
CONFIG_ARM_LPAE=y                    # å¤§ç‰©ç†åœ°å€æ‰©å±• (å¯é€‰)
CONFIG_HIGHMEM=y                     # é«˜ç«¯å†…å­˜æ”¯æŒ
CONFIG_ARM_UNWIND=y                  # ARM å †æ ˆå±•å¼€
CONFIG_UNWINDER_ARM=y                # ARM unwinder

# ARM å†…å­˜ç®¡ç†
CONFIG_ARM_DMA_USE_IOMMU=y           # DMA IOMMU æ”¯æŒ (å¯é€‰)
CONFIG_ARM_ERRATA_430973=y           # Cortex-A8 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_458693=y           # Cortex-A8 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_460075=y           # Cortex-A8 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_742230=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_742231=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_743622=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_751472=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_754322=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_754327=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_764369=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)
CONFIG_ARM_ERRATA_775420=y           # Cortex-A9 errata (å¦‚é€‚ç”¨)

# ARM é¡µé¢å¤§å°
CONFIG_ARM_4K_PAGES=y                # 4K é¡µé¢
# CONFIG_ARM_64K_PAGES=y             # 64K é¡µé¢ (æ›¿ä»£é€‰é¡¹)
```

#### ARM64 (ARMv8-A)
```bash
CONFIG_ARM64=y
CONFIG_MMU=y
CONFIG_ARM64_4K_PAGES=y              # 4K é¡µé¢ (æ¨è)
# CONFIG_ARM64_16K_PAGES=y           # 16K é¡µé¢ (æ›¿ä»£é€‰é¡¹)
# CONFIG_ARM64_64K_PAGES=y           # 64K é¡µé¢ (æ›¿ä»£é€‰é¡¹)

CONFIG_ARM64_VA_BITS_39=y            # 39ä½è™šæ‹Ÿåœ°å€ (æˆ–å…¶ä»–é€‰é¡¹)
# CONFIG_ARM64_VA_BITS_42=y          # 42ä½è™šæ‹Ÿåœ°å€
# CONFIG_ARM64_VA_BITS_47=y          # 47ä½è™šæ‹Ÿåœ°å€
# CONFIG_ARM64_VA_BITS_48=y          # 48ä½è™šæ‹Ÿåœ°å€

CONFIG_ARM64_PAN=y                   # ç‰¹æƒè®¿é—®ä¿æŠ¤ (æ¨è)
CONFIG_ARM64_HW_AFDBM=y              # ç¡¬ä»¶è®¿é—®/è„ä½ç®¡ç† (å¯é€‰)
CONFIG_ARM64_LSE_ATOMICS=y           # LSE åŸå­æ“ä½œ (å¯é€‰)
CONFIG_ARM64_VHE=y                   # è™šæ‹ŸåŒ–ä¸»æœºæ‰©å±• (å¯é€‰)
CONFIG_UNWIND_TABLES=y               # å±•å¼€è¡¨
CONFIG_ARM64_MODULE_PLTS=y           # æ¨¡å— PLT æ”¯æŒ

# ARM64 å†…å­˜ç®¡ç†
CONFIG_ZONE_DMA=y                    # DMA åŒºåŸŸ (å¯é€‰)
CONFIG_ZONE_DMA32=y                  # DMA32 åŒºåŸŸ (å¯é€‰)
CONFIG_ARM64_DMA_USE_IOMMU=y         # DMA IOMMU æ”¯æŒ (å¯é€‰)
```

#### x86/x86_64
```bash
CONFIG_X86=y                         # (æˆ– CONFIG_X86_64=y)
CONFIG_MMU=y
CONFIG_X86_PAE=y                     # ç‰©ç†åœ°å€æ‰©å±• (x86)
CONFIG_HIGHMEM4G=y                   # 4GB é«˜ç«¯å†…å­˜ (x86)
# CONFIG_HIGHMEM64G=y                # 64GB é«˜ç«¯å†…å­˜ (x86, æ›¿ä»£é€‰é¡¹)

# x86 é¡µé¢å¤§å°
CONFIG_X86_4K_PAGES=y                # 4K é¡µé¢
# CONFIG_X86_2M_PAGES=y              # 2M å¤§é¡µé¢ (æ›¿ä»£é€‰é¡¹)
# CONFIG_X86_1G_PAGES=y              # 1G å¤§é¡µé¢ (æ›¿ä»£é€‰é¡¹)

# x86 å†…å­˜ç®¡ç†ç‰¹æ€§
CONFIG_X86_PAT=y                     # é¡µé¢å±æ€§è¡¨
CONFIG_X86_INTEL_MEMORY_PROTECTION_KEYS=y  # Intel MPK (å¯é€‰)
CONFIG_X86_5LEVEL=y                  # 5çº§é¡µè¡¨ (x86_64, å¯é€‰)
CONFIG_X86_DIRECT_GBPAGES=y          # ç›´æ¥ GB é¡µé¢æ˜ å°„ (å¯é€‰)

# x86 ç‰¹å®šè°ƒè¯•
CONFIG_X86_PTDUMP_CORE=y             # é¡µè¡¨è½¬å‚¨æ ¸å¿ƒ (å¯é€‰)
CONFIG_X86_PTDUMP_DEBUGFS=y          # é¡µè¡¨è½¬å‚¨ debugfs (å¯é€‰)
```

### æ£€æŸ¥å½“å‰å†…æ ¸é…ç½®

```bash
# æ–¹æ³•1: æ£€æŸ¥ /proc/config.gz (å¦‚æœå¯ç”¨)
zcat /proc/config.gz | grep -E "CONFIG_MMU|CONFIG_PROC_FS|CONFIG_DEBUG_VM|CONFIG_STACKTRACE"

# æ–¹æ³•2: æ£€æŸ¥ /boot/config-$(uname -r)
grep -E "CONFIG_MMU|CONFIG_PROC_FS|CONFIG_DEBUG_VM|CONFIG_STACKTRACE" /boot/config-$(uname -r)

# æ–¹æ³•3: ä½¿ç”¨é©±åŠ¨çš„æ£€æŸ¥åŠŸèƒ½
make check-config

# æ–¹æ³•4: æ£€æŸ¥è¿è¡Œæ—¶æ”¯æŒ
cat /proc/meminfo | grep -E "MemTotal|VmallocTotal"
ls -la /proc/self/maps
```

### æ£€æŸ¥é¡µé¢ç®¡ç†åŠŸèƒ½

```bash
# æ£€æŸ¥é¡µé¢å¤§å°
getconf PAGESIZE
getconf PAGE_SIZE

# æ£€æŸ¥è™šæ‹Ÿå†…å­˜ç»Ÿè®¡
cat /proc/vmstat | grep -E "nr_pages|pgalloc|pgfault"

# æ£€æŸ¥å†…å­˜æ˜ å°„
cat /proc/self/maps | head -5

# æ£€æŸ¥é¡µé¢æ ‡å¿— (éœ€è¦ root)
# æ³¨æ„: æŸäº›æ“ä½œå¯èƒ½éœ€è¦ç‰¹æ®Šæƒé™
```

### å†…æ ¸æ¨¡å—åŠ è½½é…ç½®

```bash
# ç¡®ä¿å¯ä»¥åŠ è½½å†…æ ¸æ¨¡å—
CONFIG_MODULES=y                     # æ¨¡å—æ”¯æŒ
CONFIG_MODULE_UNLOAD=y               # æ¨¡å—å¸è½½
CONFIG_MODVERSIONS=y                 # æ¨¡å—ç‰ˆæœ¬ (æ¨è)

# proc æ–‡ä»¶ç³»ç»Ÿ
CONFIG_PROC_FS=y                     # /proc æ–‡ä»¶ç³»ç»Ÿ
CONFIG_PROC_SYSCTL=y                 # /proc/sys æ”¯æŒ

# sysfs æ–‡ä»¶ç³»ç»Ÿ
CONFIG_SYSFS=y                       # /sys æ–‡ä»¶ç³»ç»Ÿ

# debugfs æ–‡ä»¶ç³»ç»Ÿ (å¯é€‰)
CONFIG_DEBUG_FS=y                    # debugfs æ”¯æŒ
```

### è™šæ‹Ÿå†…å­˜ç®¡ç†é…ç½®

```bash
# è™šæ‹Ÿå†…å­˜è°ƒä¼˜å‚æ•° (è¿è¡Œæ—¶é…ç½®)
# å¯é€šè¿‡ /proc/sys/vm/ æˆ– sysctl è®¾ç½®

# è„é¡µå¤„ç†
vm.dirty_background_ratio = 10       # åå°å›å†™é˜ˆå€¼
vm.dirty_ratio = 20                  # å¼ºåˆ¶å›å†™é˜ˆå€¼

# å†…å­˜å›æ”¶
vm.swappiness = 60                   # äº¤æ¢ç§¯ææ€§
vm.vfs_cache_pressure = 100          # VFS ç¼“å­˜å‹åŠ›

# å†…å­˜æ˜ å°„
vm.max_map_count = 65530             # æœ€å¤§å†…å­˜æ˜ å°„æ•°
vm.mmap_min_addr = 65536             # æœ€å° mmap åœ°å€

# é¡µé¢åˆ†é…
vm.min_free_kbytes = 67584           # æœ€å°ç©ºé—²å†…å­˜
vm.zone_reclaim_mode = 0             # åŒºåŸŸå›æ”¶æ¨¡å¼
```

## æ”¯æŒçš„æ¶æ„

### ARM32 (Cortex-A5/A7/A8/A9/A15)
- ä½¿ç”¨ MMU é¡µé¢ä¿æŠ¤æœºåˆ¶
- æ”¯æŒ 4KB é¡µé¢å¤§å°
- åˆ©ç”¨é¡µé¢è¡¨æƒé™ä½æ§åˆ¶è®¿é—®

### ARM64 (ARMv8-A)
- 4KB/16KB/64KB é¡µé¢æ”¯æŒ
- 2çº§/3çº§/4çº§é¡µé¢è¡¨
- é«˜çº§å†…å­˜ä¿æŠ¤ç‰¹æ€§

### x86/x86_64
- 4KB æ ‡å‡†é¡µé¢
- 2MB/1GB å¤§é¡µé¢æ”¯æŒ
- NX ä½æ”¯æŒ

## ç¼–è¯‘å’Œå®‰è£…

### åŸºæœ¬ç¼–è¯‘
```bash
cd tools/memory_monitor_drivers_suite/page_protection
make
```

### æ£€æŸ¥å†…æ ¸æ”¯æŒ
```bash
# ç¼–è¯‘å‰å…ˆæ£€æŸ¥å†…æ ¸é…ç½®
make check-config

# æ£€æŸ¥é¡µé¢ç®¡ç†æ”¯æŒ
make debug
```

### æ¶æ„ç‰¹å®šç¼–è¯‘
```bash
# ARM32
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf-

# ARM64
make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu-

# x86
make ARCH=x86

# x86_64
make ARCH=x86_64
```

### OpenWrt ç¼–è¯‘
```bash
make openwrt
```

### å®‰è£…é©±åŠ¨
```bash
make install
```

### å¸è½½é©±åŠ¨
```bash
make uninstall
```

## ä½¿ç”¨æ–¹æ³•

### 1. æŸ¥çœ‹é©±åŠ¨çŠ¶æ€
```bash
cat /proc/page_monitor
```

è¾“å‡ºç¤ºä¾‹:
```
=== é¡µé¢ä¿æŠ¤å†…å­˜ç›‘æ§é©±åŠ¨ ===
ç‰ˆæœ¬: 1.0.0
ç›‘æ§æ–¹æ¡ˆ: é¡µé¢ä¿æŠ¤æœºåˆ¶
æ¶æ„: ARM64
é¡µé¢å¤§å°: 4096 bytes (4 KB)
é¡µé¢ç§»ä½: 12 bits
é«˜ç«¯å†…å­˜: ä¸æ”¯æŒ
è™šæ‹Ÿå†…å­˜: æ”¯æŒ
é¡µé¢ä¿æŠ¤: è¯»/å†™/æ‰§è¡Œæ§åˆ¶

=== ç›‘æ§çŠ¶æ€ ===
æ´»è·ƒç›‘æ§æ•°: 1 / 8
[0] test_memory: 0x00007f8b2c000000-0x00007f8b2c003fff (16384 bytes, 4é¡µé¢, ç±»å‹:3, å‘½ä¸­:0)

=== æµ‹è¯•å†…å­˜åŒºåŸŸ ===
test_memory (0x00007f8b2c000000): 16384 bytes (4é¡µé¢)
å†…å®¹é¢„è§ˆ: "Page Protection Test Memory - Initial Data"
```

### 2. æ·»åŠ ç›‘æ§ç‚¹
```bash
echo "add monitor_name address size type" > /proc/page_monitor
```

å‚æ•°è¯´æ˜:
- `monitor_name`: ç›‘æ§ç‚¹åç§°ï¼ˆæœ€å¤§31å­—ç¬¦ï¼‰
- `address`: ç›‘æ§åœ°å€ï¼ˆå¿…é¡»é¡µé¢å¯¹é½ï¼‰
- `size`: ç›‘æ§å¤§å°ï¼ˆå¿…é¡»æ˜¯PAGE_SIZEçš„å€æ•°ï¼‰
- `type`: ç›‘æ§ç±»å‹
  - `1`: åªç›‘æ§è¯»å–
  - `2`: åªç›‘æ§å†™å…¥
  - `3`: ç›‘æ§è¯»å†™

ç¤ºä¾‹:
```bash
# ç›‘æ§ä»åœ°å€ 0x1000000 å¼€å§‹çš„ 8KB å†…å­˜ï¼ˆè¯»å†™ï¼‰
echo "add buffer_monitor 0x1000000 8192 3" > /proc/page_monitor

# ç›‘æ§åªå†™è®¿é—®
echo "add write_monitor 0x2000000 4096 2" > /proc/page_monitor
```

### 3. åˆ é™¤ç›‘æ§ç‚¹
```bash
echo "del monitor_name" > /proc/page_monitor
```

ç¤ºä¾‹:
```bash
echo "del buffer_monitor" > /proc/page_monitor
```

### 4. æµ‹è¯•åŠŸèƒ½

#### æµ‹è¯•è¯»å–
```bash
echo "test_read offset" > /proc/page_monitor
```

ç¤ºä¾‹:
```bash
echo "test_read 0" > /proc/page_monitor     # è¯»å–åç§»0å¤„çš„æ•°æ®
echo "test_read 100" > /proc/page_monitor   # è¯»å–åç§»100å¤„çš„æ•°æ®
```

#### æµ‹è¯•å†™å…¥
```bash
echo "test_write offset data" > /proc/page_monitor
```

ç¤ºä¾‹:
```bash
echo "test_write 0 Hello" > /proc/page_monitor      # åœ¨åç§»0å†™å…¥"Hello"
echo "test_write 100 World" > /proc/page_monitor    # åœ¨åç§»100å†™å…¥"World"
```

## ç›‘æ§è¾“å‡ºç¤ºä¾‹

å½“å†…å­˜è®¿é—®è¢«æ£€æµ‹åˆ°æ—¶ï¼Œå†…æ ¸æ—¥å¿—ä¼šè¾“å‡ºè¯¦ç»†ä¿¡æ¯:

```
[12345.678] ğŸ“„ [page_monitor] é¡µé¢è®¿é—®æ£€æµ‹!
[12345.678] ç›‘æ§ç‚¹: test_memory
[12345.678] æ•…éšœåœ°å€: 0x00007f8b2c000000
[12345.678] é¡µé¢å·: 180306
[12345.678] å‘½ä¸­æ¬¡æ•°: 1
[12345.678] è®¿é—®ç±»å‹: å†™å…¥
[12345.678] é¡µé¢æ ‡å¿—: 0x2fffff
[12345.678] é¡µé¢å¼•ç”¨: 1
```

## é™åˆ¶å’Œæ³¨æ„äº‹é¡¹

### é¡µé¢ç²’åº¦é™åˆ¶
- ç›‘æ§ç²’åº¦ä¸ºé¡µé¢å¤§å°ï¼ˆé€šå¸¸4KBï¼‰
- æ— æ³•ç²¾ç¡®ç›‘æ§é¡µé¢å†…çš„ç‰¹å®šå­—èŠ‚
- åœ°å€å¿…é¡»é¡µé¢å¯¹é½

### æ€§èƒ½å½±å“
- æ¯æ¬¡è®¿é—®ä¼šè§¦å‘é¡µé¢é”™è¯¯å¼‚å¸¸
- é€‚åˆå¶å‘è®¿é—®çš„ç›‘æ§ï¼Œä¸é€‚åˆé¢‘ç¹è®¿é—®
- å¯èƒ½å½±å“è¢«ç›‘æ§ç¨‹åºçš„æ­£å¸¸è¿è¡Œ

### æ¶æ„é™åˆ¶
```bash
# æ£€æŸ¥å½“å‰æ¶æ„æ”¯æŒ
make debug
```

### å†…å­˜ç±»å‹
- æ”¯æŒè™šæ‹Ÿå†…å­˜åœ°å€
- æ”¯æŒ vmalloc åˆ†é…çš„å†…å­˜
- ä¸æ”¯æŒ DMA ä¸€è‡´æ€§å†…å­˜
- ä¸æ”¯æŒä¿ç•™å†…å­˜åŒºåŸŸ

## åº”ç”¨åœºæ™¯

### 1. ç¼“å†²åŒºæº¢å‡ºæ£€æµ‹
ç›‘æ§ç¼“å†²åŒºè¾¹ç•Œï¼Œæ£€æµ‹è¶Šç•Œè®¿é—®:
```bash
# åˆ†é…ç¼“å†²åŒºåï¼Œç›‘æ§å…¶è¾¹ç•Œé¡µé¢
echo "add buffer_guard 0xbuffer_end 4096 3" > /proc/page_monitor
```

### 2. å†…å­˜æ³„æ¼ç›‘æ§
ç›‘æ§å·²é‡Šæ”¾çš„å†…å­˜åŒºåŸŸ:
```bash
# åœ¨å†…å­˜é‡Šæ”¾åç»§ç»­ç›‘æ§è¯¥åŒºåŸŸ
echo "add freed_memory 0xfreed_addr 8192 3" > /proc/page_monitor
```

### 3. æ•°æ®ç»“æ„ç›‘æ§
ç›‘æ§é‡è¦æ•°æ®ç»“æ„çš„è®¿é—®:
```bash
# ç›‘æ§å…³é”®æ•°æ®ç»“æ„
echo "add critical_data 0xstruct_addr 4096 2" > /proc/page_monitor
```

### 4. è°ƒè¯•å†…å­˜è®¿é—®
åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ç›‘æ§ç‰¹å®šå†…å­˜åŒºåŸŸ:
```bash
# ä¸´æ—¶ç›‘æ§é—®é¢˜åŒºåŸŸ
echo "add debug_region 0xdebug_addr 16384 3" > /proc/page_monitor
```

## ä¸å…¶ä»–ç›‘æ§æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | é¡µé¢ä¿æŠ¤ | ç¡¬ä»¶ Watchpoint | Kprobe |
|------|----------|----------------|--------|
| ç›‘æ§ç²’åº¦ | é¡µé¢çº§ (4KB) | å­—èŠ‚çº§ | å‡½æ•°çº§ |
| ç›‘æ§æ•°é‡ | å¤šä¸ª | æœ‰é™ (2-16) | å¤§é‡ |
| æ€§èƒ½å¼€é”€ | ä¸­ç­‰ | ä½ | é«˜ |
| é€‚ç”¨åœºæ™¯ | å¤§å—å†…å­˜ | ç²¾ç¡®ç›‘æ§ | å‡½æ•°è°ƒç”¨ |

## æ•…éšœæ’é™¤

### 1. é©±åŠ¨åŠ è½½å¤±è´¥

**é—®é¢˜**: CONFIG_MMU æœªå¯ç”¨
```bash
# æ£€æŸ¥å†…æ ¸é…ç½®
make check-config

# æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬å’Œé…ç½®
uname -r
cat /proc/config.gz | gunzip | grep CONFIG_MMU
```

**é—®é¢˜**: é¡µé¢ç®¡ç†ä¸æ”¯æŒ
```bash
# æ£€æŸ¥é¡µé¢å¤§å°
getconf PAGESIZE

# æ£€æŸ¥è™šæ‹Ÿå†…å­˜
cat /proc/meminfo | grep Vmalloc

# æ£€æŸ¥æ¶æ„æ”¯æŒ
make debug
```

### 2. ç›‘æ§ä¸ç”Ÿæ•ˆ

**é—®é¢˜**: åœ°å€æœªé¡µé¢å¯¹é½
```bash
# ç¡®è®¤åœ°å€æœ‰æ•ˆæ€§
cat /proc/page_monitor

# æ£€æŸ¥é¡µé¢å¯¹é½
python3 -c "print(f'0x{address:x} % 4096 = {address % 4096}')"
```

**é—®é¢˜**: å†…å­˜ç±»å‹ä¸æ”¯æŒ
```bash
# æ£€æŸ¥å†…å­˜æ˜ å°„
cat /proc/self/maps | grep address_range

# ä½¿ç”¨ vmalloc åˆ†é…çš„åœ°å€è¿›è¡Œæµ‹è¯•
```

### 3. ç³»ç»Ÿä¸ç¨³å®š

**é—®é¢˜**: é¢‘ç¹é¡µé¢é”™è¯¯
```bash
# ç«‹å³åœæ­¢æ‰€æœ‰ç›‘æ§
echo "del monitor_name" > /proc/page_monitor

# å¸è½½é©±åŠ¨
make uninstall
```

**é—®é¢˜**: å†…å­˜ä¸è¶³
```bash
# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h
cat /proc/meminfo

# æ¸…ç†ç¼“å­˜
echo 3 > /proc/sys/vm/drop_caches
```

## å¼€å‘å’Œæ‰©å±•

### æ·»åŠ æ–°çš„ç›‘æ§ç±»å‹
ä¿®æ”¹ `page_monitor.c` ä¸­çš„ç±»å‹å¤„ç†é€»è¾‘:
```c
switch (monitor->type) {
case 4:  // æ–°çš„ç›‘æ§ç±»å‹
    // è‡ªå®šä¹‰å¤„ç†é€»è¾‘
    break;
}
```

### æ‰©å±•æ¶æ„æ”¯æŒ
åœ¨ `page_monitor.c` ä¸­æ·»åŠ æ–°æ¶æ„çš„æ£€æµ‹:
```c
#elif defined(CONFIG_NEW_ARCH)
    #define ARCH_NAME "new_arch"
    #define SUPPORTS_PAGE_PROTECTION
```

### ä¼˜åŒ–é¡µé¢å¤„ç†
```c
// æ·»åŠ æ›´é«˜æ•ˆçš„é¡µé¢æƒé™ç®¡ç†
static int optimize_page_protection(struct page *page) {
    // å®ç°ä¼˜åŒ–é€»è¾‘
    return 0;
}
```

## è®¸å¯è¯

æœ¬é©±åŠ¨åŸºäº GPL è®¸å¯è¯å‘å¸ƒã€‚

## ä½œè€…

OpenWrt Tools Project

## ç‰ˆæœ¬å†å²

- v1.0.0: åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒåŸºæœ¬é¡µé¢ä¿æŠ¤ç›‘æ§åŠŸèƒ½ 