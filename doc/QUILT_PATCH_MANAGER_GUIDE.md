# OpenWrt Quilt è¡¥ä¸ç®¡ç†å·¥å…·ä½¿ç”¨æŒ‡å— v5.1

## ğŸ“‹ æ¦‚è¿°

æœ¬å·¥å…·æ˜¯ä¸“ä¸º OpenWrt å†…æ ¸è¡¥ä¸åˆ¶ä½œè®¾è®¡çš„è‡ªåŠ¨åŒ– bash è„šæœ¬ï¼Œä½¿ç”¨ quilt å‘½ä»¤å®ç° CVE è¡¥ä¸çš„å¿«é€Ÿåˆ¶ä½œæµç¨‹ã€‚

## ğŸ†• v5.1 æ›´æ–°æ—¥å¿—

### é‡å¤§åŠŸèƒ½æ–°å¢ - æ™ºèƒ½å†²çªæ£€æµ‹ ğŸ”
- ğŸ§ª **è¡¥ä¸å…¼å®¹æ€§æ£€æµ‹**: æ–°å¢ `test-patch` å‘½ä»¤ï¼Œæ™ºèƒ½æ£€æµ‹è¡¥ä¸ä¸å½“å‰å†…æ ¸çš„å…¼å®¹æ€§
- ğŸ” **è‡ªåŠ¨å†²çªåˆ†æ**: è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶å­˜åœ¨æ€§ã€è¡¥ä¸æ˜¯å¦å·²åº”ç”¨ã€æ˜¯å¦å­˜åœ¨å†²çª
- ğŸ›‘ **å®‰å…¨é˜²æŠ¤æœºåˆ¶**: æ£€æµ‹åˆ°ä¸å…¼å®¹æ—¶è‡ªåŠ¨é˜»æ­¢å±é™©æ“ä½œï¼Œä¿æŠ¤å†…æ ¸ä»£ç 
- ğŸš¦ **æ™ºèƒ½æµç¨‹æ§åˆ¶**: `auto-patch` è‡ªåŠ¨é›†æˆå…¼å®¹æ€§æ£€æµ‹ï¼Œæä¾›å®‰å…¨å»ºè®®
- ğŸ“Š **è¯¦ç»†æ£€æµ‹æŠ¥å‘Š**: æä¾›æ–‡ä»¶ç»Ÿè®¡ã€å†²çªè¯¦æƒ…å’Œè§£å†³å»ºè®®

### æ™ºèƒ½å†³ç­–æ”¯æŒ
- âœ… **å®Œå…¨å…¼å®¹**: æ£€æµ‹åˆ°æ— å†²çªæ—¶ï¼Œå¯é€‰æ‹©è‡ªåŠ¨ç»§ç»­è¡¥ä¸åˆ¶ä½œ
- âš ï¸ **å†²çªè­¦å‘Š**: å‘ç°å†²çªæ—¶ï¼Œç”¨æˆ·å¯é€‰æ‹©ç»§ç»­æˆ–å®‰å…¨é€€å‡º
- ğŸš¨ **ä¸å…¼å®¹é˜»æ­¢**: ç¼ºå¤±å…³é”®æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨ç»ˆæ­¢æµç¨‹å¹¶æä¾›å»ºè®®

## ğŸ†• v5.0 æ›´æ–°æ—¥å¿— (ä¿ç•™åŠŸèƒ½)

### é‡å¤§åŠŸèƒ½æ–°å¢
- ğŸ§¹ **è¡¥ä¸æ¸…ç†åŠŸèƒ½**: æ™ºèƒ½æ¸…ç†è¡¥ä¸å’Œä¸´æ—¶æ–‡ä»¶ï¼Œæ”¯æŒäº¤äº’å¼ç¡®è®¤
- ğŸ“Š **Quilt å¸¸ç”¨å‘½ä»¤é›†æˆ**: å†…ç½® statusã€seriesã€appliedã€unappliedã€topã€filesã€pushã€pop ç­‰å‘½ä»¤
- ğŸ¨ **å‹å¥½ç•Œé¢æ˜¾ç¤º**: ä¸ºæ‰€æœ‰ quilt å‘½ä»¤æä¾›æ ¼å¼åŒ–è¾“å‡ºå’ŒçŠ¶æ€æ ‡è¯†
- ğŸ”§ **è¡¥ä¸çŠ¶æ€ç®¡ç†**: ä¸€é”®æŸ¥çœ‹è¡¥ä¸åº”ç”¨çŠ¶æ€å’Œè¯¦ç»†ä¿¡æ¯

### v4.0 åŠŸèƒ½ä¿ç•™
- ğŸš€ **è‡ªåŠ¨å†…æ ¸ç›®å½•æŸ¥æ‰¾**: æ— éœ€æ‰‹åŠ¨åˆ‡æ¢åˆ°å†…æ ¸æºç ç›®å½•ï¼Œè„šæœ¬è‡ªåŠ¨æŸ¥æ‰¾å¹¶åˆ‡æ¢
- ğŸ¯ **ç®€åŒ–å·¥ä½œæµç¨‹**: æ‰€æœ‰å‘½ä»¤å¯ç›´æ¥åœ¨ OpenWrt æ ¹ç›®å½•æ‰§è¡Œ
- ğŸ” **æ™ºèƒ½è·¯å¾„æ£€æµ‹**: æ”¯æŒå¤šç§ OpenWrt ç›®å½•ç»“æ„çš„è‡ªåŠ¨è¯†åˆ«
- ğŸ“‚ **å‡å°‘æ“ä½œæ­¥éª¤**: å‘Šåˆ«å¤æ‚çš„ `cd build_dir/target-*/linux-*/linux-*/` æ“ä½œ

### æŠ€æœ¯æ”¹è¿›
- ğŸ”§ **ä¿®å¤è¾“å‡ºæ··ä¹±**: è§£å†³ fetch_patch å‡½æ•°çš„æ—¥å¿—å’Œè¿”å›å€¼æ··åˆé—®é¢˜
- ğŸŒˆ **é¢œè‰²æ˜¾ç¤ºä¼˜åŒ–**: è¿›ä¸€æ­¥æ”¹è¿›ç»ˆç«¯å…¼å®¹æ€§

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. æ ¹æ® commit ID è‡ªåŠ¨æŠ“å–åŸå§‹è¡¥ä¸
- ä» Linux å†…æ ¸å®˜æ–¹ä»“åº“ä¸‹è½½è¡¥ä¸
- æ”¯æŒä»»æ„æœ‰æ•ˆçš„ commit ID
- **é‡è¦**: `fetch` å‘½ä»¤ä¸‹è½½åˆ°ä¸´æ—¶ç›®å½•ï¼Œè„šæœ¬ç»“æŸåè‡ªåŠ¨æ¸…ç†

### 2. **æ™ºèƒ½è¡¥ä¸å…¼å®¹æ€§æ£€æµ‹ (ğŸ†• v5.1)**
- ä½¿ç”¨ `test-patch` å‘½ä»¤æ™ºèƒ½æ£€æµ‹è¡¥ä¸å…¼å®¹æ€§
- è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶å­˜åœ¨æ€§å’Œå†²çªæƒ…å†µ
- æä¾›è¯¦ç»†çš„å…¼å®¹æ€§æŠ¥å‘Šå’Œè§£å†³å»ºè®®
- **å®‰å…¨æœºåˆ¶**: è‡ªåŠ¨é˜»æ­¢ä¸å…¼å®¹è¡¥ä¸çš„åº”ç”¨

### 3. **ä¿å­˜åŸå§‹è¡¥ä¸åˆ°å½“å‰ç›®å½•**
- ä½¿ç”¨ `save` å‘½ä»¤ç›´æ¥ä¿å­˜åŸå§‹è¡¥ä¸åˆ°å½“å‰ç›®å½•
- æ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶åæˆ–ä½¿ç”¨é»˜è®¤çš„ commit ID ä½œä¸ºæ–‡ä»¶å
- **æŒä¹…ä¿å­˜**: ä¸ä¼šè¢«è‡ªåŠ¨åˆ é™¤

### 4. åˆ›å»ºè¦ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
- è‡ªåŠ¨è§£æè¡¥ä¸æ¶‰åŠçš„æ‰€æœ‰æ–‡ä»¶
- ç”Ÿæˆ `patch_files.txt` æ–‡ä»¶åˆ—è¡¨ (ä¿å­˜åœ¨å½“å‰ç›®å½•ï¼Œä¸ä¼šè¢«åˆ é™¤)

### 5. æ·»åŠ æ–‡ä»¶åˆ° quilt è¡¥ä¸
- æ‰¹é‡æ·»åŠ æ–‡ä»¶åˆ—è¡¨åˆ°å½“å‰ quilt è¡¥ä¸
- è‡ªåŠ¨å¤„ç†æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥

### 6. æŠ“å–å®Œæ•´çš„è¡¥ä¸å…ƒæ•°æ®
- æå–ä½œè€…ä¿¡æ¯ã€æ—¶é—´æˆ³
- æå–è¡¥ä¸æè¿°å’Œç­¾åä¿¡æ¯
- ç”Ÿæˆ `patch_metadata.txt` å…ƒæ•°æ®æ–‡ä»¶ (ä¿å­˜åœ¨å½“å‰ç›®å½•ï¼Œä¸ä¼šè¢«åˆ é™¤)

### 7. è‡ªåŠ¨å†…æ ¸ç›®å½•ç®¡ç†
- è‡ªåŠ¨æŸ¥æ‰¾ OpenWrt å†…æ ¸æºç ç›®å½•
- æ™ºèƒ½åˆ‡æ¢åˆ°æ­£ç¡®çš„å†…æ ¸ç›®å½•
- æ”¯æŒå¤šç§ç›®å½•ç»“æ„æ£€æµ‹

### 8. ç”Ÿæˆæ–°çš„ CVE è¡¥ä¸
- åŸºäº quilt å·¥ä½œæµç¨‹
- ä¿ç•™åŸå§‹è¡¥ä¸çš„å®Œæ•´ä¿¡æ¯

### 9. **Quilt å¸¸ç”¨å‘½ä»¤é›†æˆ**
- å†…ç½®å¸¸ç”¨ quilt å‘½ä»¤ï¼Œæä¾›å‹å¥½çš„ç•Œé¢
- è‡ªåŠ¨çŠ¶æ€æ˜¾ç¤ºå’Œæ ¼å¼åŒ–è¾“å‡º
- æ”¯æŒè¡¥ä¸ç³»åˆ—ç®¡ç†å’ŒçŠ¶æ€æŸ¥è¯¢
- åŒ…å«è¡¥ä¸åº”ç”¨/ç§»é™¤åŠŸèƒ½

### 9. **è¡¥ä¸æ¸…ç†åŠŸèƒ½ (v5.0 æ–°å¢)**
- æ™ºèƒ½è¯†åˆ«å¹¶æ¸…ç†å„ç§ä¸´æ—¶æ–‡ä»¶
- äº¤äº’å¼ç¡®è®¤é¿å…è¯¯åˆ 
- æ”¯æŒå†…æ ¸ç›®å½•å’Œå½“å‰ç›®å½•æ¸…ç†
- è‡ªåŠ¨æ¸…ç† quilt å·¥ä½œç›®å½•

## ğŸ› ï¸ å®‰è£…å’Œä¾èµ–

### ç³»ç»Ÿè¦æ±‚
- macOS æˆ– Linux ç³»ç»Ÿ
- bash 4.0+

### å¿…éœ€ä¾èµ–
```bash
# åŸºæœ¬å·¥å…·
curl               # ä¸‹è½½è¡¥ä¸ (å¿…éœ€)
quilt              # è¡¥ä¸ç®¡ç† (ä»…å†…æ ¸æºç æ“ä½œéœ€è¦)

# macOS å®‰è£…
brew install quilt

# Ubuntu/Debian å®‰è£…
sudo apt-get install quilt
```

## ğŸ“ é‡è¦æ–‡ä»¶è·¯å¾„è¯´æ˜

### ä¸´æ—¶æ–‡ä»¶è·¯å¾„
- **ä¸´æ—¶ç›®å½•**: `/tmp/patch_manager_<è¿›ç¨‹ID>`
- **ç¤ºä¾‹**: `/tmp/patch_manager_3962`
- **ç‰¹ç‚¹**: è„šæœ¬ç»“æŸæ—¶è‡ªåŠ¨åˆ é™¤ï¼Œ`fetch` å‘½ä»¤ä½¿ç”¨

### æŒä¹…æ–‡ä»¶è·¯å¾„ (ä¸ä¼šè¢«åˆ é™¤)
- **åŸå§‹è¡¥ä¸**: `./<commit_id>.patch` æˆ–è‡ªå®šä¹‰æ–‡ä»¶å (ä½¿ç”¨ `save` å‘½ä»¤)
- **æ–‡ä»¶åˆ—è¡¨**: `./patch_files.txt` (å½“å‰ç›®å½•)
- **å…ƒæ•°æ®**: `./patch_metadata.txt` (å½“å‰ç›®å½•)
- **è¡¥ä¸æ–‡ä»¶**: `./patches/<è¡¥ä¸åç§°>.patch` (quilt ç®¡ç†)

### å†…æ ¸æºç ç›®å½•
- **è·¯å¾„æ ¼å¼**: `build_dir/target-*/linux-*/linux-*/`
- **ç¤ºä¾‹**: `build_dir/target-arm_cortex-a7+neon-vfpv4_musl_eabi/linux-imx_cortexa7/linux-6.6.100/`

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬å‘½ä»¤æ ¼å¼
```bash
./tools/quilt_patch_manager_final.sh <å‘½ä»¤> [å‚æ•°]
```

### å‘½ä»¤åˆ†ç±»

#### ğŸ“¥ ä»»æ„ç›®å½•å¯è¿è¡Œçš„å‘½ä»¤ (åŸºç¡€åŠŸèƒ½)
è¿™äº›å‘½ä»¤ä¸éœ€è¦åœ¨ç‰¹å®šç›®å½•è¿è¡Œï¼Œä¸»è¦ç”¨äºä¿¡æ¯æå–å’Œæ¼”ç¤ºï¼š

```bash
# æ¼”ç¤ºæ‰€æœ‰åŠŸèƒ½
./tools/quilt_patch_manager_final.sh demo

# ä¸‹è½½åŸå§‹è¡¥ä¸åˆ°ä¸´æ—¶ç›®å½• (è„šæœ¬ç»“æŸååˆ é™¤)
./tools/quilt_patch_manager_final.sh fetch <commit_id>

# ä¸‹è½½å¹¶ä¿å­˜åŸå§‹è¡¥ä¸åˆ°å½“å‰ç›®å½• (æŒä¹…ä¿å­˜) - æ–°åŠŸèƒ½
./tools/quilt_patch_manager_final.sh save <commit_id> [æ–‡ä»¶å]

# æå–æ–‡ä»¶åˆ—è¡¨åˆ°å½“å‰ç›®å½•
./tools/quilt_patch_manager_final.sh extract-files <commit_id>

# æå–å…ƒæ•°æ®åˆ°å½“å‰ç›®å½•
./tools/quilt_patch_manager_final.sh extract-metadata <commit_id>
```

#### ğŸ” æ™ºèƒ½è¡¥ä¸å…¼å®¹æ€§æ£€æµ‹ (ğŸ†• v5.1)
è¿™æ˜¯æ–°å¢çš„æ ¸å¿ƒå®‰å…¨åŠŸèƒ½ï¼Œå¯ä»¥åœ¨åº”ç”¨è¡¥ä¸å‰æ£€æµ‹å…¼å®¹æ€§ï¼Œé¿å…æŸåå†…æ ¸ä»£ç ï¼š

```bash
# æ™ºèƒ½è¡¥ä¸å…¼å®¹æ€§æ£€æµ‹ (å¼ºçƒˆæ¨èåœ¨åˆ¶ä½œè¡¥ä¸å‰ä½¿ç”¨)
./tools/quilt_patch_manager_final.sh test-patch <commit_id>

# æ£€æµ‹ç»“æœè¯´æ˜ï¼š
# âœ… å®Œå…¨å…¼å®¹ - å¯ä»¥å®‰å…¨åº”ç”¨ï¼Œæ”¯æŒè‡ªåŠ¨ç»§ç»­åˆ¶ä½œè¡¥ä¸
# âš ï¸  æœ‰å†²çª - éœ€è¦æ‰‹åŠ¨è§£å†³å†²çªï¼Œç”¨æˆ·å¯é€‰æ‹©ç»§ç»­æˆ–é€€å‡º
# ğŸš¨ ä¸å…¼å®¹ - ç¼ºå¤±å¿…è¦æ–‡ä»¶ï¼Œè‡ªåŠ¨é˜»æ­¢åº”ç”¨ï¼Œé˜²æ­¢ä»£ç æŸå
```

#### ğŸ”§ è¡¥ä¸åˆ¶ä½œå‘½ä»¤ (è‡ªåŠ¨æŸ¥æ‰¾å†…æ ¸ç›®å½•)
è¿™äº›å‘½ä»¤ç°åœ¨å¯ä»¥åœ¨ OpenWrt æ ¹ç›®å½•ç›´æ¥è¿è¡Œï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶åˆ‡æ¢åˆ°å†…æ ¸æºç ç›®å½•ï¼š

```bash
# âš ï¸ æ­£ç¡®çš„ä½¿ç”¨é¡ºåº (æ‰‹åŠ¨åˆ¶ä½œè¡¥ä¸)ï¼š
# 1. å…ˆåˆ›å»ºè¡¥ä¸ (è‡ªåŠ¨æŸ¥æ‰¾å†…æ ¸ç›®å½•)
./tools/quilt_patch_manager_final.sh create-patch <è¡¥ä¸åç§°> [commit_id]

# 2. å†æ·»åŠ æ–‡ä»¶åˆ° quilt è¡¥ä¸ (éœ€è¦å·²åˆ›å»ºè¡¥ä¸)
./tools/quilt_patch_manager_final.sh add-files <file_list.txt>

# 3. æ‰‹åŠ¨ä¿®æ”¹å†…æ ¸æºç æ–‡ä»¶ (æ ¹æ®åŸå§‹è¡¥ä¸å†…å®¹)
# 4. ç”Ÿæˆæœ€ç»ˆè¡¥ä¸
./tools/quilt_patch_manager_final.sh refresh

# ğŸ’¡ æˆ–è€…ä½¿ç”¨è‡ªåŠ¨åŒ–å®Œæ•´è¡¥ä¸åˆ¶ä½œ (æ¨è)
./tools/quilt_patch_manager_final.sh auto-patch <commit_id> <è¡¥ä¸åç§°>
```

#### ğŸ§¹ æ¸…ç†å‘½ä»¤ (v5.0 æ–°å¢)
```bash
# æ¸…ç†è¡¥ä¸å’Œä¸´æ—¶æ–‡ä»¶ (äº¤äº’å¼ç¡®è®¤)
./tools/quilt_patch_manager_final.sh clean
```

#### ğŸ“Š Quilt çŠ¶æ€ç®¡ç†å‘½ä»¤ (v5.0 æ–°å¢)
è¿™äº›å‘½ä»¤æä¾›å‹å¥½çš„ quilt çŠ¶æ€æ˜¾ç¤ºï¼Œè‡ªåŠ¨æŸ¥æ‰¾å†…æ ¸ç›®å½•ï¼š

```bash
# æ˜¾ç¤ºè¡¥ä¸çŠ¶æ€æ¦‚è§ˆ
./tools/quilt_patch_manager_final.sh status

# æ˜¾ç¤ºè¡¥ä¸ç³»åˆ—åˆ—è¡¨ (æ ‡è®°å·²åº”ç”¨/æœªåº”ç”¨çŠ¶æ€)
./tools/quilt_patch_manager_final.sh series

# æ˜¾ç¤ºå·²åº”ç”¨çš„è¡¥ä¸
./tools/quilt_patch_manager_final.sh applied

# æ˜¾ç¤ºæœªåº”ç”¨çš„è¡¥ä¸
./tools/quilt_patch_manager_final.sh unapplied

# æ˜¾ç¤ºå½“å‰é¡¶éƒ¨è¡¥ä¸
./tools/quilt_patch_manager_final.sh top

# æ˜¾ç¤ºå½“å‰è¡¥ä¸æ¶‰åŠçš„æ–‡ä»¶
./tools/quilt_patch_manager_final.sh files

# æ˜¾ç¤ºæŒ‡å®šè¡¥ä¸æ¶‰åŠçš„æ–‡ä»¶
./tools/quilt_patch_manager_final.sh files <è¡¥ä¸åç§°>
```

#### ğŸ“Œ Quilt è¡¥ä¸åº”ç”¨/ç§»é™¤å‘½ä»¤ (v5.0 æ–°å¢)
```bash
# åº”ç”¨ä¸‹ä¸€ä¸ªè¡¥ä¸
./tools/quilt_patch_manager_final.sh push

# åº”ç”¨æŒ‡å®šè¡¥ä¸
./tools/quilt_patch_manager_final.sh push <è¡¥ä¸åç§°>

# åº”ç”¨æ‰€æœ‰è¡¥ä¸
./tools/quilt_patch_manager_final.sh push -a

# ç§»é™¤å½“å‰è¡¥ä¸
./tools/quilt_patch_manager_final.sh pop

# ç§»é™¤æŒ‡å®šè¡¥ä¸
./tools/quilt_patch_manager_final.sh pop <è¡¥ä¸åç§°>

# ç§»é™¤æ‰€æœ‰è¡¥ä¸
./tools/quilt_patch_manager_final.sh pop -a

# ç”Ÿæˆ/æ›´æ–°è¡¥ä¸æ–‡ä»¶ (å°†ä¿®æ”¹å†™å…¥è¡¥ä¸)
./tools/quilt_patch_manager_final.sh refresh
```

**ğŸ¯ é‡è¦æ”¹è¿›**: ä¸å†éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ `cd build_dir/target-*/linux-*/linux-*/`ï¼

## ğŸ” test-patch å‘½ä»¤è¯¦ç»†è¯´æ˜ (ğŸ†• v5.1)

### åŠŸèƒ½æ¦‚è¿°
`test-patch` æ˜¯æ–°å¢çš„æ™ºèƒ½è¡¥ä¸å…¼å®¹æ€§æ£€æµ‹å‘½ä»¤ï¼Œèƒ½å¤Ÿåœ¨åº”ç”¨è¡¥ä¸å‰å®‰å…¨åœ°æ£€æµ‹å…¶ä¸å½“å‰å†…æ ¸çš„å…¼å®¹æ€§ï¼Œé¿å…æŸåå†…æ ¸ä»£ç ã€‚

### åŸºæœ¬ç”¨æ³•
```bash
# æ£€æµ‹è¡¥ä¸å…¼å®¹æ€§
./tools/quilt_patch_manager_final.sh test-patch <commit_id>

# ç¤ºä¾‹
./tools/quilt_patch_manager_final.sh test-patch 654b33ada4ab5e926cd9c570196fefa7bec7c1df
```

### æ£€æµ‹æµç¨‹ (5ä¸ªæ­¥éª¤)
1. **ğŸ“¥ ä¸‹è½½åŸå§‹è¡¥ä¸** - ä»å†…æ ¸å®˜æ–¹ä»“åº“è·å–è¡¥ä¸
2. **ğŸ“‚ æ£€æŸ¥å†…æ ¸ç›®å½•** - è‡ªåŠ¨å®šä½ OpenWrt å†…æ ¸æºç 
3. **ğŸ” åˆ†æè¡¥ä¸æ–‡ä»¶** - æå–è¡¥ä¸æ¶‰åŠçš„æ‰€æœ‰æ–‡ä»¶
4. **ğŸ“‹ æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§** - éªŒè¯ç›®æ ‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨
5. **ğŸ§ª å¹²è¿è¡Œè¡¥ä¸æµ‹è¯•** - ä½¿ç”¨ patch --dry-run å®‰å…¨æµ‹è¯•

### å…¼å®¹æ€§ç»“æœç±»å‹

#### âœ… å®Œå…¨å…¼å®¹ (é€€å‡ºç  0)
- æ‰€æœ‰æ–‡ä»¶å­˜åœ¨ä¸”æ— å†²çª
- å¯ä»¥å®‰å…¨åº”ç”¨è¡¥ä¸
- æä¾›è‡ªåŠ¨åˆ›å»º OpenWrt è¡¥ä¸çš„é€‰é¡¹

#### âš ï¸ æœ‰å†²çª (é€€å‡ºç  1)
- æ–‡ä»¶å­˜åœ¨ä½†å†…å®¹æœ‰å†²çª
- éœ€è¦æ‰‹åŠ¨è§£å†³å†²çª
- æä¾›å†²çªè¯¦æƒ…å’Œè§£å†³å»ºè®®

#### ğŸš¨ ä¸å…¼å®¹ (é€€å‡ºç  2)
- ç¼ºå¤±å…³é”®æ–‡ä»¶
- å†…æ ¸ç‰ˆæœ¬ä¸åŒ¹é…
- è‡ªåŠ¨é˜»æ­¢åº”ç”¨ï¼Œé˜²æ­¢ä»£ç æŸå

### è¾“å‡ºç¤ºä¾‹

#### å®Œå…¨å…¼å®¹çš„æƒ…å†µ
```bash
ğŸ‰ ç»“æœ: è¡¥ä¸å®Œå…¨å…¼å®¹ - å¯ä»¥ç›´æ¥åº”ç”¨

âœ… è¡¥ä¸æµ‹è¯•è¯¦æƒ…:
  checking file fs/proc/generic.c
  checking file fs/proc/inode.c
  checking file fs/proc/internal.h
  checking file include/linux/proc_fs.h

ğŸ’¡ å»ºè®®: å¯ä»¥å®‰å…¨åœ°åº”ç”¨æ­¤è¡¥ä¸
   â€¢ ä½¿ç”¨ auto-patch å‘½ä»¤è‡ªåŠ¨åˆ›å»º OpenWrt è¡¥ä¸
   â€¢ æˆ–æŒ‰ç…§æ‰‹åŠ¨æµç¨‹é€æ­¥åˆ›å»ºè¡¥ä¸

ğŸ¤” æ˜¯å¦è¦ç«‹å³åˆ›å»º OpenWrt è¡¥ä¸? (y/N):
```

#### æœ‰å†²çªçš„æƒ…å†µ
```bash
âš ï¸ ç»“æœ: è¡¥ä¸æœ‰å†²çª - éœ€è¦æ‰‹åŠ¨è§£å†³

ğŸ” å†²çªè¯¦æƒ…:
  patching file fs/proc/generic.c
  Hunk #1 FAILED at 123.
  1 out of 1 hunk FAILED

âš ï¸ å»ºè®®: å­˜åœ¨å†²çªï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†
   â€¢ æ£€æŸ¥å†²çªçš„å…·ä½“å†…å®¹
   â€¢ æ‰‹åŠ¨ä¿®æ”¹ç›¸å…³æ–‡ä»¶ä»¥è§£å†³å†²çª
   â€¢ ä½¿ç”¨æ‰‹åŠ¨è¡¥ä¸åˆ›å»ºæµç¨‹
   â€¢ è€ƒè™‘ä¿®æ”¹è¡¥ä¸å†…å®¹ä»¥é€‚é…å½“å‰å†…æ ¸

ğŸ›‘ è­¦å‘Š: ä¸è¦ç›´æ¥åº”ç”¨æ­¤è¡¥ä¸ï¼Œä¼šå¯¼è‡´ä»£ç æŸå
```

### æœ€ä½³å®è·µ
1. **æ€»æ˜¯å…ˆæ£€æµ‹**: åœ¨åˆ¶ä½œè¡¥ä¸å‰ï¼Œæ€»æ˜¯ä½¿ç”¨ `test-patch` æ£€æµ‹å…¼å®¹æ€§
2. **å®‰å…¨é€€å‡º**: å¦‚æœæ£€æµ‹åˆ°ä¸å…¼å®¹ï¼Œç«‹å³åœæ­¢å¹¶æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬
3. **è§£å†³å†²çª**: å¯¹äºæœ‰å†²çªçš„è¡¥ä¸ï¼Œå…ˆæ‰‹åŠ¨è§£å†³å†²çªå†ä½¿ç”¨æ‰‹åŠ¨æµç¨‹
4. **è‡ªåŠ¨ç»§ç»­**: å¯¹äºå®Œå…¨å…¼å®¹çš„è¡¥ä¸ï¼Œå¯é€‰æ‹©è‡ªåŠ¨ç»§ç»­åˆ›å»º OpenWrt è¡¥ä¸

## ğŸš€ save å‘½ä»¤è¯¦ç»†è¯´æ˜

### åŸºæœ¬ç”¨æ³•
```bash
# ä½¿ç”¨é»˜è®¤æ–‡ä»¶å (commit_id.patch)
./tools/quilt_patch_manager_final.sh save 654b33ada4ab5e926cd9c570196fefa7bec7c1df

# ä½¿ç”¨è‡ªå®šä¹‰æ–‡ä»¶å
./tools/quilt_patch_manager_final.sh save 654b33ada4ab5e926cd9c570196fefa7bec7c1df proc-uaf-fix.patch

# ä¸å¸¦ .patch æ‰©å±•å (ä¼šè‡ªåŠ¨æ·»åŠ )
./tools/quilt_patch_manager_final.sh save 654b33ada4ab5e926cd9c570196fefa7bec7c1df proc-uaf-fix
```

### è¾“å‡ºç¤ºä¾‹
```bash
$ ./quilt_patch_manager_final.sh save 654b33ada4ab5e926cd9c570196fefa7bec7c1df
[SUCCESS] åŸå§‹è¡¥ä¸å·²ä¿å­˜åˆ°: 654b33ada4ab5e926cd9c570196fefa7bec7c1df.patch
[INFO] æ–‡ä»¶å¤§å°: 6371 å­—èŠ‚
[INFO] æ–‡ä»¶ä½ç½®: /current/directory/654b33ada4ab5e926cd9c570196fefa7bec7c1df.patch
```

### ä¸ fetch å‘½ä»¤çš„åŒºåˆ«
| å‘½ä»¤ | ä¿å­˜ä½ç½® | æŒä¹…æ€§ | ç”¨é€” |
|------|----------|--------|------|
| `fetch` | ä¸´æ—¶ç›®å½• | è„šæœ¬ç»“æŸæ—¶åˆ é™¤ | å†…éƒ¨å¤„ç†ä½¿ç”¨ |
| `save` | å½“å‰ç›®å½• | æ°¸ä¹…ä¿å­˜ | ç”¨æˆ·ä¿å­˜åŸå§‹è¡¥ä¸ |

## ğŸš€ å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹

### åœºæ™¯ï¼šä¸º OpenWrt åˆ¶ä½œ proc UAF CVE è¡¥ä¸

#### æ­¥éª¤ 1: æ¼”ç¤ºåŠŸèƒ½äº†è§£å·¥å…· (ä»»æ„ç›®å½•)
```bash
cd /any/directory
./quilt_patch_manager_final.sh demo
```
**è¾“å‡º**:
- ä¸´æ—¶ç›®å½•: `/tmp/patch_manager_<PID>/` (è‡ªåŠ¨æ¸…ç†)
- æŒä¹…æ–‡ä»¶: `patch_files.txt`, `patch_metadata.txt`, `demo_*.patch` (ä¿ç•™)

#### æ­¥éª¤ 2: ä¿å­˜åŸå§‹è¡¥ä¸ (ä»»æ„ç›®å½•) - æ–°åŠŸèƒ½
```bash
# ä¿å­˜åŸå§‹è¡¥ä¸ä¾›å‚è€ƒ
./quilt_patch_manager_final.sh save 654b33ada4ab5e926cd9c570196fefa7bec7c1df proc-uaf-original.patch

# æå–æ–‡ä»¶åˆ—è¡¨
./quilt_patch_manager_final.sh extract-files 654b33ada4ab5e926cd9c570196fefa7bec7c1df

# æå–å…ƒæ•°æ®ä¿¡æ¯
./quilt_patch_manager_final.sh extract-metadata 654b33ada4ab5e926cd9c570196fefa7bec7c1df
```

#### æ­¥éª¤ 3: ç›´æ¥æ‰§è¡Œè‡ªåŠ¨åŒ–è¡¥ä¸åˆ¶ä½œ ğŸ†• v4.0
```bash
# ç°åœ¨å¯ä»¥ç›´æ¥åœ¨ OpenWrt æ ¹ç›®å½•è¿è¡Œï¼Œæ— éœ€æ‰‹åŠ¨åˆ‡æ¢ç›®å½•ï¼
./quilt_patch_manager_final.sh auto-patch 654b33ada4ab5e926cd9c570196fefa7bec7c1df 950-proc-fix-UAF
```
**ğŸ¯ é‡å¤§æ”¹è¿›**: è„šæœ¬ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶åˆ‡æ¢åˆ°å†…æ ¸æºç ç›®å½•ï¼

#### æ­¥éª¤ 4: æ‰‹åŠ¨ä¿®æ”¹æºç æ–‡ä»¶
æ ¹æ®å·¥å…·æç¤ºå’Œç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ‰‹åŠ¨ä¿®æ”¹ç›¸åº”çš„æºç æ–‡ä»¶

#### æ­¥éª¤ 5: å®Œæˆè¡¥ä¸ç”Ÿæˆ
æŒ‰å›è½¦ç»§ç»­ï¼Œå·¥å…·ä¼šè‡ªåŠ¨ç”Ÿæˆæœ€ç»ˆè¡¥ä¸

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯¦ç»†è¯´æ˜

### 1. åŸå§‹è¡¥ä¸æ–‡ä»¶ (æ–°åŠŸèƒ½)
**ä½ç½®**: å½“å‰æ‰§è¡Œç›®å½•
**å‘½å**: `<commit_id>.patch` æˆ–è‡ªå®šä¹‰åç§°
**å†…å®¹**: å®Œæ•´çš„åŸå§‹å†…æ ¸è¡¥ä¸
**è·å–**: ä½¿ç”¨ `save` å‘½ä»¤
**ç¤ºä¾‹**:
```bash
# é»˜è®¤å‘½å
654b33ada4ab5e926cd9c570196fefa7bec7c1df.patch

# è‡ªå®šä¹‰å‘½å
proc-uaf-fix.patch
```

### 2. patch_files.txt (æŒä¹…æ–‡ä»¶)
**ä½ç½®**: å½“å‰æ‰§è¡Œç›®å½•
**å†…å®¹ç¤ºä¾‹**:
```
fs/proc/generic.c
fs/proc/inode.c
fs/proc/internal.h
include/linux/proc_fs.h
```
**è¯´æ˜**: åŒ…å«è¡¥ä¸æ¶‰åŠçš„æ‰€æœ‰æ–‡ä»¶è·¯å¾„ï¼Œä¸ä¼šè¢«è‡ªåŠ¨åˆ é™¤

### 3. patch_metadata.txt (æŒä¹…æ–‡ä»¶)
**ä½ç½®**: å½“å‰æ‰§è¡Œç›®å½•
**å†…å®¹ç¤ºä¾‹**:
```
# ======================================
# CVE è¡¥ä¸å…ƒæ•°æ®ä¿¡æ¯
# ======================================
# ç”Ÿæˆæ—¶é—´: Mon Aug  4 22:30:00 CST 2025
# Commit ID: 654b33ada4ab5e926cd9c570196fefa7bec7c1df
# åŸå§‹è¡¥ä¸ URL: https://git.kernel.org/...

## åŸºæœ¬ä¿¡æ¯
ä½œè€…: From: Ye Bin <yebin10@huawei.com>
æ—¥æœŸ: Date: Sat, 1 Mar 2025 15:06:24 +0300
ä¸»é¢˜: Subject: [PATCH] proc: fix UAF in proc_get_inode()

## è¡¥ä¸æè¿°
Fix race between rmmod and /proc/XXX's inode instantiation.
...

## ç­¾åå’Œæ ‡ç­¾ä¿¡æ¯
Signed-off-by: Ye Bin <yebin10@huawei.com>
Cc: stable@vger.kernel.org
```
**è¯´æ˜**: åŒ…å«å®Œæ•´çš„è¡¥ä¸ä¿¡æ¯ï¼Œä¸ä¼šè¢«è‡ªåŠ¨åˆ é™¤

### 4. patches/<è¡¥ä¸åç§°>.patch (quilt ç®¡ç†)
**ä½ç½®**: å†…æ ¸æºç ç›®å½•çš„ `patches/` å­ç›®å½•
**è¯´æ˜**: æœ€ç»ˆç”Ÿæˆçš„ OpenWrt æ ¼å¼è¡¥ä¸æ–‡ä»¶

### 5. /tmp/patch_manager_<PID>/ (ä¸´æ—¶ç›®å½•)
**ä½ç½®**: ç³»ç»Ÿä¸´æ—¶ç›®å½•
**å†…å®¹**: `fetch` å‘½ä»¤ä¸‹è½½çš„ä¸´æ—¶è¡¥ä¸æ–‡ä»¶
**é‡è¦**: è„šæœ¬ç»“æŸæ—¶è‡ªåŠ¨åˆ é™¤ï¼Œæ— æ³•æŒä¹…ä¿å­˜

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. ä¸´æ—¶æ–‡ä»¶ vs æŒä¹…æ–‡ä»¶å¯¹æ¯”

| æ–‡ä»¶ç±»å‹ | å‘½ä»¤ | ä¿å­˜ä½ç½® | æ¸…ç†æœºåˆ¶ | ç”¨é€” |
|----------|------|----------|----------|------|
| ä¸´æ—¶æ–‡ä»¶ | `fetch` | `/tmp/patch_manager_<PID>/` | è‡ªåŠ¨åˆ é™¤ | å†…éƒ¨å¤„ç† |
| æŒä¹…æ–‡ä»¶ | `save` | å½“å‰ç›®å½• | æ°¸ä¹…ä¿å­˜ | ç”¨æˆ·ä¿å­˜ |
| æŒä¹…æ–‡ä»¶ | `extract-*` | å½“å‰ç›®å½• | æ°¸ä¹…ä¿å­˜ | ä¿¡æ¯æå– |

### 2. å¦‚ä½•é€‰æ‹©ä½¿ç”¨ fetch vs save

**ä½¿ç”¨ `fetch`**:
- åªéœ€è¦å†…éƒ¨å¤„ç†ï¼Œä¸éœ€è¦ä¿å­˜æ–‡ä»¶
- é…åˆå…¶ä»–å‘½ä»¤ä½¿ç”¨ (`extract-files`, `extract-metadata`)

**ä½¿ç”¨ `save`**:
- éœ€è¦ä¿ç•™åŸå§‹è¡¥ä¸æ–‡ä»¶ä¾›åç»­å‚è€ƒ
- æƒ³è¦ç¦»çº¿æŸ¥çœ‹è¡¥ä¸å†…å®¹
- éœ€è¦ä¸å…¶ä»–å·¥å…·é…åˆä½¿ç”¨åŸå§‹è¡¥ä¸

### 3. æ–‡ä»¶æƒé™
ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™ï¼š
```bash
chmod +x quilt_patch_manager_final.sh
```

### 4. ç½‘ç»œè¦æ±‚
- éœ€è¦èƒ½å¤Ÿè®¿é—® `git.kernel.org`
- ä¸‹è½½å¤±è´¥æ—¶ä¼šæ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. æ‰¹é‡ä¿å­˜å¤šä¸ªè¡¥ä¸
```bash
commits=("commit1" "commit2" "commit3")
for commit in "${commits[@]}"; do
    ./quilt_patch_manager_final.sh save $commit "${commit}_patch.patch"
done
```

### 2. ğŸ” æ¨èå·¥ä½œæµç¨‹ï¼šå®‰å…¨è¡¥ä¸åˆ¶ä½œ (v5.1 æ–°å¢)
```bash
commit_id="654b33ada4ab5e926cd9c570196fefa7bec7c1df"

# ç¬¬1æ­¥: æ™ºèƒ½å…¼å®¹æ€§æ£€æµ‹ (å¼ºçƒˆæ¨è)
./quilt_patch_manager_final.sh test-patch $commit_id

# æ ¹æ®æ£€æµ‹ç»“æœé€‰æ‹©åç»­æ“ä½œï¼š
# âœ… å®Œå…¨å…¼å®¹ -> å¯é€‰æ‹©è‡ªåŠ¨ç»§ç»­æˆ–æ‰‹åŠ¨åˆ¶ä½œ
# âš ï¸  æœ‰å†²çª -> æ‰‹åŠ¨åˆ¶ä½œï¼Œéœ€è¦è§£å†³å†²çª
# ğŸš¨ ä¸å…¼å®¹ -> åœæ­¢ï¼Œæ£€æŸ¥å†…æ ¸ç‰ˆæœ¬æˆ–å¯»æ‰¾å…¶ä»–è¡¥ä¸

# ç¬¬2æ­¥: å¦‚æœå…¼å®¹ï¼Œä¿å­˜åŸå§‹è¡¥ä¸ä¾›å‚è€ƒ
./quilt_patch_manager_final.sh save $commit_id original.patch

# ç¬¬3æ­¥: æå–è¡¥ä¸ä¿¡æ¯
./quilt_patch_manager_final.sh extract-files $commit_id
./quilt_patch_manager_final.sh extract-metadata $commit_id

# ç¬¬4æ­¥: è‡ªåŠ¨åˆ¶ä½œè¡¥ä¸ (å¦‚æœå…¼å®¹æ€§æ£€æµ‹é€šè¿‡)
./quilt_patch_manager_final.sh auto-patch $commit_id 950-proc-fix-UAF

# ç°åœ¨æœ‰äº†å®Œæ•´çš„è¡¥ä¸åˆ†æåŒ…
ls -la *.patch *.txt
```

### 3. ç»„åˆä½¿ç”¨ save å’Œ extract å‘½ä»¤ (ä¼ ç»Ÿæ–¹å¼)
```bash
commit_id="654b33ada4ab5e926cd9c570196fefa7bec7c1df"

# ä¿å­˜åŸå§‹è¡¥ä¸
./quilt_patch_manager_final.sh save $commit_id original.patch

# æå–ä¿¡æ¯
./quilt_patch_manager_final.sh extract-files $commit_id
./quilt_patch_manager_final.sh extract-metadata $commit_id

# ç°åœ¨æœ‰äº†å®Œæ•´çš„è¡¥ä¸åˆ†æåŒ…
ls -la *.patch *.txt
```

### 4. éªŒè¯è¡¥ä¸æ–‡ä»¶å®Œæ•´æ€§
```bash
# ä¿å­˜è¡¥ä¸åéªŒè¯
saved_patch="proc-uaf-fix.patch"
./quilt_patch_manager_final.sh save 654b33ada4ab5e926cd9c570196fefa7bec7c1df $saved_patch

# æ£€æŸ¥æ–‡ä»¶å¤§å°å’Œå†…å®¹
ls -la $saved_patch
head -10 $saved_patch
```

## ğŸ› æ•…éšœæ’é™¤

### 1. save å‘½ä»¤å¤±è´¥
**é—®é¢˜**: æ— æ³•ä¿å­˜è¡¥ä¸åˆ°å½“å‰ç›®å½•
**å¯èƒ½åŸå› **: 
- ç½‘ç»œè¿æ¥é—®é¢˜
- å½“å‰ç›®å½•æƒé™ä¸è¶³
- commit ID æ— æ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -I https://git.kernel.org

# æ£€æŸ¥ç›®å½•æƒé™
ls -la .

# éªŒè¯ commit ID
./quilt_patch_manager_final.sh fetch <commit_id>
```

### 2. æ–‡ä»¶åå†²çª
**é—®é¢˜**: ä¿å­˜æ—¶æ–‡ä»¶å·²å­˜åœ¨
**è§£å†³**: ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åæˆ–å…ˆåˆ é™¤ç°æœ‰æ–‡ä»¶
```bash
# ä½¿ç”¨æ—¶é—´æˆ³é¿å…å†²çª
./quilt_patch_manager_final.sh save $commit_id "patch_$(date +%Y%m%d_%H%M%S).patch"
```

### 3. add-files å‘½ä»¤å¤±è´¥ ğŸ†• v5.0
**é—®é¢˜**: è„šæœ¬æç¤º"è¯·å…ˆåˆ›å»º quilt è¡¥ä¸ï¼Œä½¿ç”¨: quilt new <patch_name>"
**åŸå› **: åœ¨æ²¡æœ‰ quilt ç¯å¢ƒæ—¶ç›´æ¥ä½¿ç”¨ add-files å‘½ä»¤

**âœ… æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹æ³•1: ä½¿ç”¨ create-patch å…ˆåˆ›å»ºè¡¥ä¸
./tools/quilt_patch_manager_final.sh create-patch my-patch-name

# ç„¶åå†æ·»åŠ æ–‡ä»¶
./tools/quilt_patch_manager_final.sh add-files patch_files.txt

# æ–¹æ³•2: ç›´æ¥ä½¿ç”¨è‡ªåŠ¨åŒ–å‘½ä»¤ (æ¨è)
./tools/quilt_patch_manager_final.sh auto-patch <commit_id> <patch_name>
```

### 4. è‡ªåŠ¨å†…æ ¸ç›®å½•æŸ¥æ‰¾å¤±è´¥ ğŸ†• v4.0
**é—®é¢˜**: è„šæœ¬æç¤º"æœªæ‰¾åˆ° OpenWrt å†…æ ¸æºç ç›®å½•"
**å¯èƒ½åŸå› **:
- å°šæœªæ‰§è¡Œ `make target/linux/prepare` è§£å‹å†…æ ¸
- ç›®å½•ç»“æ„ä¸æ˜¯æ ‡å‡†çš„ OpenWrt ç»“æ„
- æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. é¦–å…ˆè§£å‹å†…æ ¸æºç 
make target/linux/prepare V=s

# 2. æ£€æŸ¥å†…æ ¸ç›®å½•æ˜¯å¦å­˜åœ¨
find . -name "linux-*" -type d | grep build_dir

# 3. æ‰‹åŠ¨éªŒè¯å†…æ ¸ç›®å½•
ls -la build_dir/target-*/linux-*/linux-*/Makefile

# 4. å¦‚æœä»æœ‰é—®é¢˜ï¼Œæ‰‹åŠ¨åˆ‡æ¢åˆ°å†…æ ¸ç›®å½•åè¿è¡Œ
cd build_dir/target-*/linux-*/linux-*/
/path/to/quilt_patch_manager_final.sh <command>
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [OpenWrt å®˜æ–¹æ–‡æ¡£](https://openwrt.org/docs/)
- [Quilt å®˜æ–¹æ–‡æ¡£](https://savannah.nongnu.org/projects/quilt)
- [Linux å†…æ ¸è¡¥ä¸æŒ‡å—](https://www.kernel.org/doc/html/latest/process/submitting-patches.html)

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ¨èå·¥ä½œæµç¨‹
1. ä½¿ç”¨ `save` å‘½ä»¤ä¿å­˜åŸå§‹è¡¥ä¸ä¾›å‚è€ƒ
2. ä½¿ç”¨ `extract-files` å’Œ `extract-metadata` æå–åˆ†æä¿¡æ¯
3. åœ¨å†…æ ¸æºç ç›®å½•ä½¿ç”¨ `auto-patch` å®Œæˆè¡¥ä¸åˆ¶ä½œ
4. ä½¿ç”¨ `quilt` å‘½ä»¤éªŒè¯è¡¥ä¸çŠ¶æ€

### 2. æ–‡ä»¶ç®¡ç†å»ºè®®
- ä¸ºé‡è¦çš„ CVE è¡¥ä¸åˆ›å»ºä¸“é—¨çš„ç›®å½•
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æ–‡ä»¶åè€Œä¸æ˜¯ commit ID
- ä¿ç•™åŸå§‹è¡¥ä¸ã€æ–‡ä»¶åˆ—è¡¨å’Œå…ƒæ•°æ®ä½œä¸ºå®Œæ•´åŒ…

### 3. å‘½ä»¤é€‰æ‹©æŒ‡å—
- **éœ€è¦ä¿å­˜æ–‡ä»¶**: ä½¿ç”¨ `save`
- **åªéœ€å†…éƒ¨å¤„ç†**: ä½¿ç”¨ `fetch`
- **ä¿¡æ¯æå–**: ä½¿ç”¨ `extract-*`
- **å®Œæ•´æµç¨‹**: ä½¿ç”¨ `auto-patch`

---

**ç‰ˆæœ¬**: 4.0  
**æ›´æ–°æ—¶é—´**: 2025-08-04  
**é€‚ç”¨ç³»ç»Ÿ**: macOS / Linux  
**ä½œè€…**: OpenWrt è¡¥ä¸ç®¡ç†å·¥å…·å¼€å‘å›¢é˜Ÿ

## ğŸ“‹ æ›´æ–°æ—¥å¿—

### v4.0 (2025-08-04) ğŸš€ é‡å¤§æ›´æ–°
- ğŸš€ **è‡ªåŠ¨å†…æ ¸ç›®å½•æŸ¥æ‰¾**: è„šæœ¬è‡ªåŠ¨æŸ¥æ‰¾å¹¶åˆ‡æ¢åˆ° OpenWrt å†…æ ¸æºç ç›®å½•
- ğŸ¯ **ç®€åŒ–å·¥ä½œæµç¨‹**: æ‰€æœ‰å‘½ä»¤å¯ç›´æ¥åœ¨ OpenWrt æ ¹ç›®å½•æ‰§è¡Œ
- ğŸ” **æ™ºèƒ½è·¯å¾„æ£€æµ‹**: æ”¯æŒå¤šç§ OpenWrt ç›®å½•ç»“æ„çš„è‡ªåŠ¨è¯†åˆ«
- ğŸ“‚ **å‘Šåˆ«æ‰‹åŠ¨åˆ‡æ¢**: æ— éœ€æ‰§è¡Œ `cd build_dir/target-*/linux-*/linux-*/`
- ğŸ”§ **ä¿®å¤è¾“å‡ºæ··ä¹±**: è§£å†³ fetch_patch å‡½æ•°çš„æ—¥å¿—å’Œè¿”å›å€¼æ··åˆé—®é¢˜
- ğŸŒˆ **é¢œè‰²æ˜¾ç¤ºä¼˜åŒ–**: è¿›ä¸€æ­¥æ”¹è¿›ç»ˆç«¯å…¼å®¹æ€§

### v3.0 (2025-08-04)
- âœ… **æ–°å¢ save å‘½ä»¤**: æ”¯æŒä¿å­˜åŸå§‹è¡¥ä¸åˆ°å½“å‰ç›®å½•
- âœ… æ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶åæˆ–ä½¿ç”¨é»˜è®¤ commit ID ä½œä¸ºæ–‡ä»¶å
- âœ… è‡ªåŠ¨æ·»åŠ  .patch æ‰©å±•å
- âœ… åœ¨ auto-patch æµç¨‹ä¸­è‡ªåŠ¨ä¿å­˜åŸå§‹è¡¥ä¸ä¾›å‚è€ƒ
- âœ… å®Œå–„å¸®åŠ©ä¿¡æ¯ï¼Œæ˜ç¡®åŒºåˆ†ä¸´æ—¶æ–‡ä»¶å’ŒæŒä¹…æ–‡ä»¶
- âœ… æ›´æ–°æ¼”ç¤ºåŠŸèƒ½ï¼Œå±•ç¤º save å‘½ä»¤çš„ä½¿ç”¨

### v2.0 (2025-08-04)
- âœ… å®Œå–„å¸®åŠ©ä¿¡æ¯ï¼Œè¯¦ç»†è¯´æ˜ä¸´æ—¶ç›®å½•æœºåˆ¶
- âœ… å¢åŠ å½©è‰²è¾“å‡ºå’Œæ›´å¥½çš„ç”¨æˆ·ç•Œé¢
- âœ… æ˜ç¡®åŒºåˆ†ä¸´æ—¶æ–‡ä»¶å’ŒæŒä¹…æ–‡ä»¶

### v1.0 (2025-08-04)
- âœ… åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒåŸºæœ¬çš„è¡¥ä¸ç®¡ç†åŠŸèƒ½
